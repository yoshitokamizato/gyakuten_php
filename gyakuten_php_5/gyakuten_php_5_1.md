## 関数の書き方・呼び出し方
関数とは一言で言うと、あるまとまった処理を行い値を返す「処理のかたまり」です。

例えば、「選んだ商品と購入する数によって合計金額を計算する」とか「入力したIDとパスワードを判定してログインできるかどうかを判定する」などの一連の処理をまとめ、プログラムの中でいつでもどこでも簡単に必要な処理を呼び出せるようにしたものです。

PHPには便利な関数がもとから組み込まれていて、それらは「組み込み関数」と呼ばれます。

また、自分で定義した関数は「ユーザー定義関数」と呼びます。

関数に渡される値を「引数」と呼びます。

まずはPHPにもとから用意されている組み込み関数をみていきましょう。

### 組み込み関数
ではよく使う代表的な組み込み関数をみてみましょう。

#### 出力系
|関数|処理の内容|
|---|---|
|print|文字列を出力する|
|print_r|データ型と値を出力する|
|var_dump|データ型・値・長さなどを詳細に出力する|

#### 文字列操作系
|関数|処理の内容|
|---|---|
|strlen|文字列の長さを返す|
|mb_strlen|文字列の長さを返す（日本語対応）|
|substr|文字列の一部分を返す|
|str_replace|検索文字列に一致したすべての文字列を置換する|
|implode|配列から文字列を生成する|
|explode|文字列から配列を生成する|

#### 数学系
|関数|処理の内容|
|---|---|
|floor|小数点以下を切り捨てた値を返す|
|max|引数の中の最大値を返す|
|min|引数の中の最小値を返す|
|mt_rand|乱数を生成する。引数にその範囲を指定することができる。|
|round|四捨五入した値を返す。桁数を指定することができる。|

#### 日付・時刻系
|関数|処理の内容|
|---|---|
|time|現在のタイムスタンプ値を取得|
|mktime|指定された年月日、時分秒に対応するタイムスタンプ値を取得|
|date|タイムスタンプ値を指定フォーマットで整形|
|checkdate|日付が妥当か判定|

他に
* 変数操作系
* 配列系
* ファイルシステム系
* セッション系

など、まだまだたくさんの関数が用意されています。
これまでこの講座で学んできた中で既に使っているものもありますね。

では関数の基本的な使い方をみていきましょう。

PHPの組み込み関数の基本的な書き方は以下の通りとなります。

```
組み込み関数名(引数);
```

関数名のすぐ後ろには必ずかっこ`()`が続きます。このかっこの中には`引数`と呼ばれる`関数を引き出すときに渡す値`を指定します。
`print関数`を例にみてみましょう。print関数は文字列を出力する関数であり、かっこの中に出力する文字列を記述します。

```php
<?php

print('この文字が表示されます');

?>
```

実行結果
```
この文字が表示されます
```

どのような引数を指定するかは、関数によって異なります。

また、個数が違う場合もあります。
引数を複数指定する場合はカンマ`,`で区切り続けて記述します。

`substr関数`をみていきましょう。substr関数は文字列の一部分を取り出す関数です。

```
substr(文字列, 開始位置, 文字列の長さ);
```

このように記述します。使用していきましょう。

```php
<?php

$string = "ABCDEFGHIJ";
$result = substr($string, 5, 3);
echo $result

?>
```

まず第一引数に文字列を指定します。`$string`のように引数には変数を指定することもできます。

そして第二引数は開始位置ですが、ここで注意しなければならいのは先頭の文字を0番目とするので今回の場合`A`を0として数えるので指定した5番目は`F`となります。

第三引数で文字列の長さを3としているので`FGH`となります。

その結果を変数`$result`に格納して`echo`で出力すると

```
FGH
```

と表示されます。

引数は省略可能なものもあり、指定しない場合はかっこの中を空「( )」にしておきます。
例えば先ほどのコードを

```php
<?php

$string = "ABCDEFGHIJ";
$result = substr($string, 5);
echo $result

?>
```

として第三引数を省略した場合は

```
FGHIJ
```

と、文字列の最後までを返します。


PHPにはこのような組み込み関数が1000以上用意されています。

用意された関数をすべて覚えるのは不可能です。

実際に仕事や個人開発、共同開発で使う場面がきたら、PHPの公式ドキュメントで使い方を調べながら覚えていけば問題ありません。


### ユーザー定義関数
次はユーザー定義関数です。
ユーザーが独自に関数を作って使用することができます。

実際に関数を自作していきましょう。

書き方は以下のようになります。

```
function 関数名(引数) {
  処理;
}
```

関数を定義するときの書き始めは`function`です。

そのあとに関数名を書きます。
半角英数字と_（アンダースコア）が使えます。
先頭が数字はNG。大文字と小文字は区別されません。

関数名は変数と同じで自由につけることができますが、一目でその関数がどのような操作を行うのかがわかるように命名するのが望ましいです。

そのあとにかっこ`()`を書き中に引数を指定します。

そして続けて波かっこ`{}`を書きます。この波かっこの中をブロックと呼びここに処理の内容を書きます。

それでは実際に`Hello World!`とだけ出力される関数を作成してみましょう。

```php
<?php
// 関数の定義
function printHello() {
    echo "Hello World!";
}
    
?>
```

今回は引数を指定しないためかっこの中は空です。

ではこの関数を呼び出してみましょう。

```php
<?php
// 関数の定義    
function printHello() {
    echo "Hello World!";
}
// 関数の呼び出し   
printHello();
    
?>
```

これで
```
Hello World!
```
と表示されます。

次は引数を指定した関数を作成してみましょう。

```php
<?php
// 関数の定義    
function printName($name) {
    echo "私の名前は" . $name . "です。";
}

?>
```

ではこの関数を呼び出してみましょう。

```php
<?php
// 関数の定義    
function printName($name) {
    echo "私の名前は" . $name . "です。";
}
// 関数の呼び出し
printName('佐藤');

?>

```

このように呼び出しの際に引数を指定します。すると、

```
私の名前は佐藤です。
```

と表示されます。

そして次のように引数の中身を変えて何度でも呼び出すことができます。

```php
<?php
// 関数の定義    
function printName($name) {
    echo "私の名前は" . $name . "です。";
}
// 関数の呼び出し    
printName('佐藤');
printName('田中');
printName('高橋');

?>

```

実行結果は

```
私の名前は佐藤です。
私の名前は田中です。
私の名前は高橋です。
```

となります。

さらに引数を複数指定してみましょう。

```php
<?php
// 関数の定義    
function printName($last_name, $first_name, $age) {
    echo "私の名前は" . $last_name . $first_name . "です。" . $age . "才です。";
}
// 関数の呼び出し
printName('佐藤', '一郎', 27);

?>

```

実行結果は

```
私の名前は佐藤一郎です。27才です。
```

となります。


### まとめ
さて、これまでみてきたように、関数とは一度定義した機能を**何度でも繰り返し使い回せる**というのが一番のメリットです。

変数も代入した`値`を何度も使い回すことができましたね。関数は`処理`を定義し後から何度でも使い回せるのです。

受け取った引数によってふるまいをかえることができるのです。

これにより同じ処理を何度もするソースコードだとしても簡潔に書くことができます。

まずは関数リファレンスを調べて用意されている組み込み関数を使って慣れていきましょう。それから自分の行いたい処理を自分自身で定義して実際に使ってみてください。

お疲れ様でした！